{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "service": "coupons",
  "platform": "any",
  "oneOf": [
    {
      "$ref": "#/definitions/page"
    }
  ],
  "definitions": {
    "dataProviders": {
      "cps.Collections": {},
      "cps.CampaignsList": {
        "required": ["collectionUuid", "partnerUuid"],
        "properties": {
          "collectionUuid": {
            "type": "string",
            "label": "UUID Кампании"
          },
          "partnerUuid": {
            "type": "string",
            "label": "UUID Ритейлера"
          }
        }
      },
      "cps.TagsList": {},
      "cps.Campaign": {}
    },
    "presets": {
      "type": "string",
      "enum": [
        "catsSlider",
        "analyticsCollection",
        "paginationCollections"
      ]
    },
    "componentName": {
      "type": "string",
      "enum": [
        "b-cats-box",
        "b-swipe-box",
        "b-vertical-box",
        "b-slider-box",
        "b-def-box"
      ]
    },
    "page": {
      "type": "array",
      "items": {
        "oneOf": [
          {
            "$ref": "#/definitions/b-cats-box"
          },
          {
            "$ref": "#/definitions/b-vertical-box"
          },
          {
            "$ref": "#/definitions/b-slider-box"
          },
          {
            "$ref": "#/definitions/b-def-box"
          }
        ]
      }
    },
    "node": {
      "type": "object",
      "required": [
        "component",
        "params"
      ],
      "properties": {
        "component": {
          "$ref": "#/definitions/componentName"
        },
        "params": {
          "type": "object",
          "required": [
            "slug"
          ],
          "properties": {
            "slug": {
              "type": "string",
              "label": "slug"
            },
            "name": {
              "type": "string",
              "label": "Название компонента"
            },
            "presets": {
              "type": "array",
              "label": "Преднастройки",
              "items": {
                "$ref": "#/definitions/presets"
              }
            },
            "children": {
              "$ref": "#/definitions/page"
            }
          }
        }
      }
    },
    "b-cats-box": {
      "label": "Блок категорий",
      "allOf": [
        {
          "$ref": "#/definitions/node"
        },
        {
          "properties": {
            "params": {
              "content": null,
              "dataProvider": {
                "type": "string",
                "enum": {
                  "$ref": "#/definitions/dataProviders"
                },
                "label": "Поставщик данных"
              }
            }
          }
        }
      ]
    },
    "b-vertical-box": {
      "label": "Вертикальный блок карточек",
      "allOf": [
        {
          "$ref": "#/definitions/b-cats-box"
        }
      ]
    },
    "b-slider-box": {
      "label": "Горизонтальный блок карточек",
      "allOf": [
        {
          "$ref": "#/definitions/b-cats-box"
        },
        {
          "properties": {
            "params": {
              "uuid": {
                "type": "text",
                "label": "uuid"
              }
            }
          }
        }
      ]
    },
    "b-def-box": {
      "label": "Составной блок",

      "allOf": [
        {
          "$ref": "#/definitions/node"
        },
        {
          "properties": {
            "params": {
              "mainColor": {
                "type": "text",
                "label": "Основной цвет"
              },
              "style": {
                "type": "text",
                "label": "Стиль"
              }
            }
          }
        }
      ]
    }
  }
}
